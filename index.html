<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALFA PONSEL TV - Google Shaka Edition</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.5/shaka-player.compiled.debug.js"></script>
    <style>
        :root { --primary: #00ff00; --bg: #050505; --card: #151515; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); color: white; margin: 0; padding: 0; }
        .header { background: #000; padding: 15px; text-align: center; border-bottom: 2px solid var(--primary); position: sticky; top: 0; z-index: 1000; }
        .header h1 { margin: 0; color: var(--primary); font-size: 20px; text-transform: uppercase; }
        .container { max-width: 1000px; margin: auto; padding: 15px; }
        
        #video-container { width: 100%; background: #000; border-radius: 12px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.8); border: 1px solid #222; margin-bottom: 20px; }
        video { width: 100%; aspect-ratio: 16/9; display: block; }

        .category-title { background: #222; padding: 10px 15px; margin: 25px 0 10px; border-radius: 5px; font-size: 12px; font-weight: bold; color: var(--primary); letter-spacing: 1px; }
        
        .channel-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 10px; }
        .channel-card { background: var(--card); border: 1px solid #222; padding: 12px 5px; text-align: center; border-radius: 8px; cursor: pointer; transition: 0.2s; font-size: 12px; height: 40px; display: flex; align-items: center; justify-content: center; }
        .channel-card:hover { border-color: var(--primary); transform: scale(1.03); }
        .channel-card.active { background: var(--primary); color: #000; font-weight: bold; }
    </style>
</head>
<body>

<div class="header">
    <h1>ALFA PONSEL TV</h1>
</div>

<div class="container">
    <div id="video-container">
        <video id="video" controls autoplay playsinline></video>
    </div>

    <div id="main-list">
        <p style="text-align:center; opacity: 0.5;">Menghubungkan ke Google Shaka...</p>
    </div>
</div>

<script>
    const m3uUrl = 'https://raw.githubusercontent.com/maulanaisna/NontonTV/main/maulanaisna.m3u';
    const video = document.getElementById('video');
    const mainList = document.getElementById('main-list');
    let player;

    async function initApp() {
        // Install built-in polyfills to patch browser incompatibilities.
        shaka.polyfil.installAll();
        if (!shaka.Player.isBrowserSupported()) {
            alert('Browser tidak mendukung Shaka Player!');
            return;
        }

        player = new shaka.Player(video);
        player.addEventListener('error', (e) => console.error('Error code', e.detail.code, 'object', e.detail));

        loadPlaylist();
    }

    async function loadPlaylist() {
        try {
            const res = await fetch(m3uUrl);
            const text = await res.text();
            const lines = text.split('\n');
            mainList.innerHTML = '';
            
            let currentGroup = "";
            let grid = null;

            for (let i = 0; i < lines.length; i++) {
                if (lines[i].startsWith('#EXTINF')) {
                    const line = lines[i];
                    const name = line.split(',')[1] || "Channel";
                    const groupMatch = line.match(/group-title="([^"]+)"/);
                    const group = groupMatch ? groupMatch[1] : "LAINNYA";
                    const url = lines[i+1]?.trim();

                    if (url && url.startsWith('http')) {
                        if (group !== currentGroup) {
                            const title = document.createElement('div');
                            title.className = 'category-title';
                            title.innerText = group;
                            mainList.appendChild(title);
                            grid = document.createElement('div');
                            grid.className = 'channel-grid';
                            mainList.appendChild(grid);
                            currentGroup = group;
                        }

                        const card = document.createElement('div');
                        card.className = 'channel-card';
                        card.innerText = name;
                        card.onclick = () => {
                            document.querySelectorAll('.channel-card').forEach(c => c.classList.remove('active'));
                            card.classList.add('active');
                            playVideo(url);
                        };
                        grid.appendChild(card);
                    }
                }
            }
        } catch (e) {
            mainList.innerHTML = 'Gagal memuat playlist.';
        }
    }

    async function playVideo(url) {
        try {
            await player.load(url);
            video.play();
            window.scrollTo({top: 0, behavior: 'smooth'});
        } catch (e) {
            console.error('Gagal putar video', e);
            // Fallback untuk Safari jika Shaka gagal pada HLS tertentu
            video.src = url;
        }
    }

    document.addEventListener('DOMContentLoaded', initApp);
</script>

</body>
</html>

<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALFA PONSEL TV - Streaming</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        :root { --primary: #00ff00; --bg: #0a0a0a; --card: #1e1e1e; }
        body { font-family: 'Segoe UI', Roboto, sans-serif; background: var(--bg); color: white; margin: 0; padding: 0; }
        .header { background: #000; padding: 20px; text-align: center; border-bottom: 2px solid var(--primary); }
        .header h1 { margin: 0; color: var(--primary); font-size: 24px; letter-spacing: 2px; }
        .container { max-width: 1000px; margin: auto; padding: 15px; }
        
        #video-wrapper { position: sticky; top: 10px; z-index: 100; background: #000; border-radius: 12px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.8); border: 1px solid #333; margin-bottom: 25px; }
        video { width: 100%; aspect-ratio: 16/9; display: block; }

        .category-title { background: linear-gradient(90deg, #333, transparent); padding: 8px 15px; margin: 20px 0 10px; border-left: 4px solid var(--primary); font-size: 14px; font-weight: bold; text-transform: uppercase; color: #ccc; }
        
        .channel-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 12px; }
        .channel-card { background: var(--card); border: 1px solid #333; padding: 15px 10px; text-align: center; border-radius: 8px; cursor: pointer; transition: 0.2s; font-size: 13px; font-weight: 500; display: flex; align-items: center; justify-content: center; min-height: 50px; }
        .channel-card:hover { border-color: var(--primary); background: #252525; transform: translateY(-2px); color: var(--primary); }
        .channel-card.active { background: var(--primary); color: #000; font-weight: bold; border-color: var(--primary); }
        
        @media (max-width: 600px) { .channel-grid { grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); } }
    </style>
</head>
<body>

<div class="header">
    <h1>ALFA PONSEL TV</h1>
</div>

<div class="container">
    <div id="video-wrapper">
        <video id="video" controls autoplay playsinline></video>
    </div>

    <div id="main-list">
        <p style="text-align:center; opacity: 0.5;">Memuat siaran...</p>
    </div>
</div>

<script>
    // Link M3U Raw kamu
    const m3uUrl = 'https://raw.githubusercontent.com/maulanaisna/NontonTV/main/maulanaisna.m3u';
    
    const video = document.getElementById('video');
    const mainList = document.getElementById('main-list');

    async function initTV() {
        try {
            const res = await fetch(m3uUrl);
            const text = await res.text();
            const lines = text.split('\n');
            mainList.innerHTML = '';
            
            let currentGroup = "";
            let grid = null;

            for (let i = 0; i < lines.length; i++) {
                if (lines[i].startsWith('#EXTINF')) {
                    const line = lines[i];
                    const name = line.split(',')[1] || "Tanpa Nama";
                    
                    // Ambil grup
                    const groupMatch = line.match(/group-title="([^"]+)"/);
                    const group = groupMatch ? groupMatch[1] : "LAIN-LAIN";
                    
                    const url = lines[i+1]?.trim();

                    if (url && url.startsWith('http')) {
                        // Jika grup baru, buat judul kategori
                        if (group !== currentGroup) {
                            const title = document.createElement('div');
                            title.className = 'category-title';
                            title.innerText = group;
                            mainList.appendChild(title);
                            
                            grid = document.createElement('div');
                            grid.className = 'channel-grid';
                            mainList.appendChild(grid);
                            
                            currentGroup = group;
                        }

                        // Buat tombol channel
                        const card = document.createElement('div');
                        card.className = 'channel-card';
                        card.innerText = name;
                        card.onclick = function() {
                            // Hapus status active dari tombol lain
                            document.querySelectorAll('.channel-card').forEach(c => c.classList.remove('active'));
                            this.classList.add('active');
                            playStream(url);
                        };
                        grid.appendChild(card);
                    }
                }
            }
        } catch (e) {
            mainList.innerHTML = '<p style="color:red; text-align:center;">Gagal mengambil data siaran.</p>';
        }
    }

    function playStream(url) {
        if (Hls.isSupported()) {
            const hls = new Hls();
            hls.loadSource(url);
            hls.attachMedia(video);
            hls.on(Hls.Events.MANIFEST_PARSED, () => video.play());
        } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
            video.src = url;
            video.play();
        }
        // Scroll otomatis ke video saat klik channel di HP
        window.scrollTo({top: 0, behavior: 'smooth'});
    }

    initTV();
</script>

</body>
</html>




