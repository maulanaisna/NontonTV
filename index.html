<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maulana TV Dashboard</title>
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />
    <style>
        body { background: #121212; color: white; font-family: -apple-system, sans-serif; margin: 0; padding-bottom: 20px; }
        .header { background: #1f1f1f; padding: 15px; text-align: center; border-bottom: 2px solid #ff9800; font-weight: bold; }
        .video-container { position: sticky; top: 0; z-index: 100; background: black; border-bottom: 1px solid #333; }
        .video-js { width: 100% !important; height: 210px !important; }
        .list-container { padding: 10px; }
        .chan-card { 
            background: #252525; margin-bottom: 8px; padding: 15px; 
            border-radius: 10px; border: 1px solid #333; 
            display: flex; align-items: center; justify-content: space-between;
            cursor: pointer;
        }
        .chan-card:active { background: #ff9800; color: black; }
        .status { text-align: center; padding: 20px; color: #888; font-size: 14px; }
    </style>
</head>
<body>

<div class="header">MAULANA TV ONLINE</div>

<div class="video-container">
    <video id="tv-player" class="video-js vjs-default-skin vjs-16-9" controls preload="auto" playsinline></video>
</div>

<div id="status" class="status">Sedang memproses playlist...</div>
<div class="list-container" id="playlist-container"></div>

<script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
<script>
    var player = videojs('tv-player');
    // LINK SAKTI KAMU
    const m3uUrl = 'https://raw.githubusercontent.com/maulanaisna/NontonTV/main/maulanaisna.m3u';

    async function loadM3U() {
        const status = document.getElementById('status');
        const container = document.getElementById('playlist-container');

        try {
            const response = await fetch(m3uUrl);
            if (!response.ok) throw new Error('Gagal ambil file');
            const text = await response.text();
            
            const lines = text.split('\n');
            let channelsFound = 0;

            for (let i = 0; i < lines.length; i++) {
                let line = lines[i].trim();
                
                if (line.startsWith('#EXTINF')) {
                    // Ambil nama channel setelah koma
                    let parts = line.split(',');
                    let name = parts[parts.length - 1] || "Unnamed Channel";
                    
                    // Baris berikutnya biasanya adalah URL-nya
                    let url = lines[i + 1] ? lines[i + 1].trim() : "";
                    
                    if (url.startsWith('http')) {
                        channelsFound++;
                        const card = document.createElement('div');
                        card.className = 'chan-card';
                        card.innerHTML = `<span>${name}</span> <strong>â–¶</strong>`;
                        card.onclick = function() {
                            player.src({ src: url, type: 'application/x-mpegURL' });
                            player.play();
                            window.scrollTo({top: 0, behavior: 'smooth'});
                        };
                        container.appendChild(card);
                    }
                }
            }

            if (channelsFound > 0) {
                status.style.display = 'none';
            } else {
                status.innerText = "Playlist kosong atau format salah.";
            }

        } catch (error) {
            status.innerText = "Error: " + error.message + ". Pastikan link raw benar.";
            console.error(error);
        }
    }

    loadM3U();
</script>

</body>
</html>
